import{D as L,m as U,x as W,B as m,z as F}from"./index-BCrRIqGG.js";import{r as N,n as e,L as P}from"./chunk-K6AXKMTT-YwewBSBh.js";import{G,p as B,P as R,r as _,s as j,v as T,w as v,F as h,d as t,x as E,l as V,m as A,D as k,y as H,z as Y,A as J,E as Z,I as Q,q as K,B as n,J as q,H as b,K as X,N as D,O as ee,Q as I,R as re,j as S,e as oe,f as ne,g as se,C as te,L as le,M as ie}from"./getData-j5-LWEbE.js";import"./index-C-j6SY-t.js";const $=N.forwardRef(function(s,o){const{columns:a,minChildWidth:c,...l}=s,i=L(),u=c?ce(c,i):de(a);return e.jsx(G,{ref:o,templateColumns:u,...l})});function ae(r){return typeof r=="number"?`${r}px`:r}function ce(r,s){return U(r,o=>{const a=s.tokens.getVar(`sizes.${o}`,ae(o));return o===null?null:`repeat(auto-fit, minmax(${a}, 1fr))`})}function de(r){return U(r,s=>s===null?null:`repeat(${s}, minmax(0, 1fr))`)}const{withContext:he,PropsProvider:Se}=W({key:"link"}),C=he("a"),ue=(r,s=!1)=>{const o=k.fromISO(r.timeUTC),a=o.plus({hours:1}),c=O=>O.toUTC().toFormat("yyyyMMdd'T'HHmmss'Z'"),l=c(o),i=c(a),u=c(k.now()),g=`${r.slug}-${l}@oiaa-direct.com`,d=[Array.isArray(r.notes)?r.notes.join("\\n"):r.notes||"",r.conference_url?`Join Meeting: ${r.conference_url}`:"",r.conference_phone?`Phone: ${r.conference_phone}`:"",r.groupEmail?`Contact: ${r.groupEmail}`:"",r.groupWebsite?`Website: ${r.groupWebsite}`:""].filter(Boolean).join("\\n\\n"),x=r.conference_url||"Online Meeting",p=s?`
RRULE:FREQ=WEEKLY;BYDAY=`+["SU","MO","TU","WE","TH","FR","SA"][o.weekday%7]:"";return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//OIAA Direct//Meeting Calendar//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${g}
DTSTART:${l}
DTEND:${i}
DTSTAMP:${u}
SUMMARY:${r.name}
DESCRIPTION:${d}
LOCATION:${x}${p}
STATUS:CONFIRMED
TRANSP:OPAQUE
BEGIN:VALARM
TRIGGER:-PT15M
ACTION:DISPLAY
DESCRIPTION:Meeting reminder
END:VALARM
END:VEVENT
END:VCALENDAR`},y=(r,s=!1)=>{const o=ue(r,s),a=new Blob([o],{type:"text/calendar;charset=utf-8"}),c=URL.createObjectURL(a),l=document.createElement("a");l.href=c,l.download=`${r.slug}${s?"-recurring":""}.ics`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(c)},z=(r,s=!1)=>{const o=k.fromISO(r.timeUTC),a=o.plus({hours:1}),c=o.toUTC().toFormat("yyyyMMdd'T'HHmmss'Z'"),l=a.toUTC().toFormat("yyyyMMdd'T'HHmmss'Z'"),i=encodeURIComponent([Array.isArray(r.notes)?r.notes.join(`
`):r.notes||"",r.conference_url?`Join: ${r.conference_url}`:"",r.groupEmail?`Contact: ${r.groupEmail}`:""].filter(Boolean).join(`

`)),u=encodeURIComponent(r.conference_url||"Online Meeting"),g=s?"&recur=RRULE:FREQ=WEEKLY":"";return{google:`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(r.name)}&dates=${c}/${l}&details=${i}&location=${u}${g}`,outlook:`https://outlook.live.com/calendar/0/deeplink/compose?subject=${encodeURIComponent(r.name)}&startdt=${o.toISO()}&enddt=${a.toISO()}&body=${i}&location=${u}`,yahoo:`https://calendar.yahoo.com/?v=60&view=d&type=20&title=${encodeURIComponent(r.name)}&st=${c}&et=${l}&desc=${i}&in_loc=${u}`}},me=({meeting:r,mode:s="compact",size:o="sm",layout:a="horizontal",forceMode:c})=>{const l=B({base:"icon-only",sm:"compact",md:"full"}),i=c||s||l,u=z(r,!1),g=z(r,!0),d=(p=!0)=>i==="icon-only"?e.jsx(j,{}):i==="compact"?e.jsxs(h,{align:"center",gap:2,children:[e.jsx(j,{}),e.jsx(t,{children:p?"Calendar":"Add"})]}):e.jsxs(h,{align:"center",gap:2,children:[e.jsx(j,{}),e.jsx(t,{children:p?"Add to Calendar":"Add Event"})]}),x={gap:a==="horizontal"?2:1,direction:a==="vertical"?"column":"row",align:"stretch",w:a==="vertical"?"full":"auto"};return i==="icon-only"?e.jsxs(R,{positioning:{placement:"bottom-start"},children:[e.jsx(_,{asChild:!0,children:e.jsx(m,{size:o,variant:"outline",colorScheme:"green",title:"Add to Calendar",children:e.jsx(j,{})})}),e.jsx(T,{children:e.jsx(v,{children:e.jsxs(h,{direction:"column",gap:2,children:[e.jsx(t,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Add to Calendar"}),e.jsxs(m,{size:"xs",variant:"ghost",justifyContent:"flex-start",onClick:()=>y(r,!1),children:[e.jsx(j,{style:{marginRight:"8px"}}),"Single Event (.ics)"]}),e.jsxs(m,{size:"xs",variant:"ghost",justifyContent:"flex-start",onClick:()=>y(r,!0),children:[e.jsx(E,{style:{marginRight:"8px"}}),"Recurring Series (.ics)"]}),e.jsx(t,{fontSize:"xs",color:"gray.500",mt:2,mb:1,children:"Quick Add:"}),e.jsx(m,{as:"a",size:"xs",variant:"ghost",justifyContent:"flex-start",colorScheme:"blue",onClick:()=>window.open(u.google,"_blank"),children:"Google Calendar"}),e.jsx(m,{as:"a",size:"xs",variant:"ghost",justifyContent:"flex-start",colorScheme:"blue",onClick:()=>window.open(u.outlook,"_blank"),children:"Outlook"})]})})})]}):e.jsx(h,{...x,children:e.jsxs(R,{positioning:{placement:"bottom-start"},children:[e.jsx(_,{asChild:!0,children:e.jsx(m,{size:o,variant:"outline",colorScheme:"green",children:e.jsxs(h,{align:"center",gap:2,children:[d(),e.jsx(V,{})]})})}),e.jsx(T,{children:e.jsx(v,{children:e.jsxs(h,{direction:"column",gap:3,children:[e.jsx(t,{fontSize:"sm",fontWeight:"medium",children:"Add to Calendar"}),e.jsxs(h,{direction:"column",gap:2,children:[e.jsx(t,{fontSize:"xs",fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},children:"Single Event"}),e.jsxs(A,{gap:2,children:[e.jsxs(m,{size:"xs",variant:"outline",onClick:()=>y(r,!1),flex:"1",children:[e.jsx(j,{style:{marginRight:"4px"}}),"Download .ics"]}),e.jsx(m,{size:"xs",variant:"ghost",colorScheme:"blue",flex:"1",onClick:()=>window.open(u.google,"_blank"),children:"Google"}),e.jsx(m,{size:"xs",variant:"ghost",colorScheme:"blue",flex:"1",onClick:()=>window.open(u.outlook,"_blank"),children:"Outlook"})]})]}),e.jsxs(h,{direction:"column",gap:2,children:[e.jsx(t,{fontSize:"xs",fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},children:"Recurring Series (Weekly)"}),e.jsxs(A,{gap:2,children:[e.jsxs(m,{size:"xs",variant:"outline",colorScheme:"purple",onClick:()=>y(r,!0),flex:"1",children:[e.jsx(E,{style:{marginRight:"4px"}}),"Download .ics"]}),e.jsx(m,{size:"xs",variant:"ghost",colorScheme:"purple",flex:"1",onClick:()=>window.open(g.google,"_blank"),children:"Google"}),e.jsx(m,{size:"xs",variant:"ghost",colorScheme:"purple",flex:"1",onClick:()=>window.open(g.outlook,"_blank"),children:"Outlook"})]})]}),e.jsx(t,{fontSize:"xs",color:"gray.500",_dark:{color:"gray.400"},children:"Events include meeting links, phone numbers, and reminders."})]})})})]})})},xe=({joinUrl:r})=>{const s=H(r),o=s.isOk()?`Join ${s.value} Meeting`:"Join Meeting",a=s.isOk()&&s.value==="Virtual Reality"?Y:J;return e.jsx(C,{href:r,target:"_blank",rel:"noopener noreferrer",_hover:{textDecoration:"none"},children:e.jsxs(m,{bg:"blue.700",color:"white",size:"md",width:"full",_hover:{bg:"blue.800"},children:[e.jsx(a,{style:{marginRight:"8px"}}),o]})})},w={...oe,...ne,...se,...te,...le},ge={features:"purple",formats:"blue",languages:"green",communities:"orange",type:"cyan"},pe=(r,s)=>{const o=new Date(r),a=Intl.DateTimeFormat().resolvedOptions().timeZone,c=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",timeZone:s,hour12:!0}),l=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",timeZone:a,hour12:!0}),i=c.format(o),u=l.format(o);return{originalTime:i,userTime:u,originalTimezone:s,userTimezone:a}},M=r=>new Date(r).toLocaleString(void 0,{weekday:"long"}),je=r=>w[r]||r;async function we({params:r}){const s=await Z(r.slug),o=await Q(`${r.slug}/related-group-info`);return console.log("meeting",s),console.log("group",o),{meeting:s,group:o}}function be({meeting:r}){return e.jsx(n,{p:4,borderWidth:"1px",borderColor:"gray.200",borderRadius:"md",bg:"white",shadow:"sm",_dark:{borderColor:"gray.700",bg:"gray.800"},children:e.jsxs(h,{direction:{base:"column",md:"row"},gap:4,align:{base:"stretch",md:"flex-start"},children:[e.jsxs(n,{flex:"1",children:[e.jsx(b,{size:"md",color:"gray.900",_dark:{color:"gray.100"},mb:2,children:r.name}),e.jsx(ie,{meeting:r,variant:"compact",showActions:!1,showCategories:!1,showNotes:!1,showLink:!1}),e.jsxs(h,{flexWrap:"wrap",gap:1,mt:3,children:[r.formats.map(s=>e.jsx(S,{colorScheme:"blue",variant:"subtle",px:2,py:1,borderRadius:"full",fontSize:"xs",children:w[s]||s},s)),r.type&&e.jsx(S,{colorScheme:"purple",variant:"subtle",px:2,py:1,borderRadius:"full",fontSize:"xs",children:w[r.type]||r.type})]})]}),e.jsx(n,{children:e.jsx(me,{meeting:r,mode:"full",size:"md",layout:"vertical"})})]})})}const Re=F(function({loaderData:s}){const{meeting:o,group:a}=s,{groupMeetings:c,groupInfo:l}=a,i=pe(o.timeUTC,o.timezone),u=["features","formats","languages","communities","type"],g=o.groupWebsite;return c.sort((d,x)=>d.timeUTC.localeCompare(x.timeUTC)),e.jsxs(K,{children:[e.jsx(n,{mb:4,children:e.jsx(P,{to:"/",children:e.jsxs(m,{size:"sm",variant:"outline",colorScheme:"blue",children:[e.jsx(q,{style:{marginRight:"8px"}}),"Back to Meetings"]})})}),e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:6,bg:"white",_dark:{bg:"gray.800",borderColor:"whiteAlpha.300"},boxShadow:"md",children:e.jsx(n,{bg:"blue.50",_dark:{bg:"blue.900"},p:4,children:e.jsxs(h,{justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",children:[e.jsxs(n,{children:[e.jsx(b,{size:"lg",color:"blue.600",_dark:{color:"blue.300"},children:o.name}),e.jsxs(h,{align:"center",mt:2,children:[e.jsx(n,{mr:2,color:"gray.600",_dark:{color:"gray.400"},children:e.jsx(X,{})}),e.jsxs(t,{color:"gray.600",_dark:{color:"gray.400"},fontWeight:"medium",children:[M(o.timeUTC)," at ",i.originalTime," (",i.originalTimezone.replace("_"," "),")"]})]}),e.jsxs(h,{align:"center",mt:1,children:[e.jsx(n,{mr:2,color:"gray.600",_dark:{color:"gray.400"},children:e.jsx(D,{})}),e.jsxs(t,{color:"gray.600",_dark:{color:"gray.400"},children:["Your local time: ",i.userTime," (",i.userTimezone,")"]})]}),e.jsxs(h,{align:"center",mt:1,children:[e.jsx(n,{mr:2,color:"gray.600",_dark:{color:"gray.400"},children:e.jsx(ee,{})}),e.jsxs(t,{color:"gray.600",_dark:{color:"gray.400"},children:[o.duration," minutes"]})]})]}),e.jsxs(n,{mt:{base:4,md:0},children:[o.conference_url&&e.jsx(n,{as:"span",display:"inline-block",mr:2,verticalAlign:"middle",children:e.jsx(xe,{joinUrl:o.conference_url})}),g&&e.jsx(C,{href:g,target:"_blank",rel:"noopener noreferrer",_hover:{textDecoration:"none"},display:"inline-block",mr:2,children:e.jsxs(m,{bg:"purple.600",color:"white",_hover:{bg:"purple.700"},_dark:{bg:"purple.600",_hover:{bg:"purple.700"}},size:"md",children:[e.jsx(D,{style:{marginRight:"8px"}}),"Website"]})}),o.groupEmail&&e.jsx(C,{href:`mailto:${o.groupEmail}`,_hover:{textDecoration:"none"},display:"inline-block",children:e.jsxs(m,{bg:"teal.600",color:"white",_hover:{bg:"teal.700"},_dark:{bg:"teal.600",_hover:{bg:"teal.700"}},size:"md",children:[e.jsx(I,{style:{marginRight:"8px"}}),"Email"]})})]})]})})}),e.jsxs(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",bg:"white",mb:6,_dark:{bg:"gray.800",borderColor:"whiteAlpha.300"},boxShadow:"sm",children:[e.jsx(n,{p:4,bg:"gray.50",_dark:{bg:"gray.700"},children:e.jsx(b,{size:"sm",mb:0,children:"Meeting Details"})}),e.jsxs(n,{p:6,children:[e.jsxs(n,{mb:6,children:[e.jsxs(b,{size:"sm",mb:3,display:"flex",alignItems:"center",children:[e.jsx(n,{as:"span",mr:2,children:e.jsx(re,{})}),"Meeting Categories"]}),e.jsx($,{columns:{base:1,md:2},gap:4,children:u.map(d=>{const x=o[d],p=Array.isArray(x)?x:[x];return p.length===0?null:e.jsxs(n,{children:[e.jsxs(t,{fontWeight:"bold",mb:2,textTransform:"capitalize",children:[d,":"]}),e.jsx(h,{flexWrap:"wrap",gap:2,children:p.filter(f=>typeof f=="string").map(f=>e.jsx(S,{colorScheme:ge[d],variant:"subtle",px:2,py:1,borderRadius:"full",children:je(f)},`${d}-${f}`))})]},d)})})]}),e.jsxs($,{columns:{base:1,md:2},gap:4,mb:6,children:[e.jsxs(n,{children:[e.jsx(t,{fontWeight:"bold",children:"Meeting ID"}),e.jsx(t,{children:o.slug})]}),o.group_id&&e.jsxs(n,{children:[e.jsx(t,{fontWeight:"bold",children:"Group ID"}),e.jsx(t,{children:o.group_id})]}),e.jsxs(n,{children:[e.jsx(t,{fontWeight:"bold",children:"Day"}),e.jsx(t,{children:M(o.timeUTC)})]}),e.jsxs(n,{children:[e.jsx(t,{fontWeight:"bold",children:"Meeting Time"}),e.jsxs(t,{children:[i.originalTime," (",i.originalTimezone.replace("_"," "),")"]})]}),e.jsxs(n,{children:[e.jsx(t,{fontWeight:"bold",children:"Your Local Time"}),e.jsxs(t,{children:[i.userTime," (",i.userTimezone,")"]})]}),o.conference_provider&&e.jsxs(n,{children:[e.jsx(t,{fontWeight:"bold",children:"Conference Provider"}),e.jsx(t,{children:o.conference_provider})]})]}),o.notes&&e.jsxs(n,{mb:6,children:[e.jsx(b,{size:"sm",mb:3,children:"About This Group"}),e.jsx(n,{p:4,bg:"gray.50",_dark:{bg:"gray.700"},borderRadius:"md",children:(Array.isArray(o.notes)?o.notes:o.notes.split(`
`)).map((d,x)=>e.jsx(t,{color:"gray.700",_dark:{color:"gray.300"},mb:2,children:d},x))})]}),l.notes&&e.jsxs(n,{mt:4,children:[e.jsx(t,{fontWeight:"bold",mb:2,children:"Group Notes"}),e.jsx(n,{p:4,bg:"gray.50",_dark:{bg:"gray.700"},borderRadius:"md",children:l.notes.split(`
`).map((d,x)=>e.jsx(t,{mb:2,children:d},x))})]})]})]}),e.jsxs(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:6,bg:"white",_dark:{bg:"gray.800",borderColor:"whiteAlpha.300"},boxShadow:"md",children:[e.jsxs(n,{bg:"blue.50",_dark:{bg:"blue.900"},p:4,children:[e.jsxs(b,{size:"md",color:"blue.600",_dark:{color:"blue.300"},children:[l.name," - All Meetings"]}),l.email&&e.jsxs(h,{align:"center",mt:2,children:[e.jsx(n,{mr:2,color:"gray.600",_dark:{color:"gray.400"},children:e.jsx(I,{})}),e.jsx(C,{href:`mailto:${l.email}`,color:"gray.600",_dark:{color:"gray.400"},children:l.email})]})]}),e.jsx(n,{p:6,children:e.jsx(h,{direction:"column",gap:4,children:c.map((d,x)=>e.jsxs(n,{p:4,borderWidth:"1px",borderRadius:"md",borderColor:"gray.200",_dark:{borderColor:"gray.700"},_hover:{boxShadow:"sm"},children:[e.jsx(be,{meeting:d}),x<c.length-1&&e.jsx(n,{borderBottom:"1px",borderColor:"gray.200",_dark:{borderColor:"gray.700"},mt:4})]},d.slug))})})]})]})});export{we as clientLoader,Re as default};
